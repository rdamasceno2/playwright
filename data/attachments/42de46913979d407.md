# Test info

- Name: Client App login for IPHONE 13 PRO
- Location: /home/runner/work/playwright/playwright/tests/ClientAppPO.spec.ts:14:10

# Error details

```
TimeoutError: locator.waitFor: Timeout 30000ms exceeded.
Call log:
  - waiting for locator('.ta-results') to be visible

    at PaymentPage.SearchCountryAndSelect (/home/runner/work/playwright/playwright/pageobjects_ts/PaymentPage.ts:59:23)
    at /home/runner/work/playwright/playwright/tests/ClientAppPO.spec.ts:36:5
```

# Page snapshot

```yaml
- navigation:
  - link "Automation Automation Practice":
    - /url: ""
    - heading "Automation" [level=3]
    - paragraph: Automation Practice
  - link "QA Meetup with Rahul Shetty @Pune - Limited Seats! Book Now!":
    - /url: https://qasummit.org/
  - list:
    - listitem:
      - button " HOME"
    - listitem
    - listitem:
      - button " ORDERS"
    - listitem:
      - button " Cart 1"
    - listitem:
      - button "Sign Out"
- text: "IPHONE 13 PRO $ 231500 Quantity: 1"
- list:
  - listitem: iphonenew
- text: Payment Method Credit Card Paypal SEPA Invoice Personal Information Credit Card Number
- textbox: 4542 9931 9292 2293
- text: Expiry Date
- combobox:
  - option "01"
  - option "02"
  - option "03"
  - option "04" [selected]
  - option "05"
  - option "06"
  - option "07"
  - option "08"
  - option "09"
  - option "10"
  - option "11"
  - option "12"
- combobox:
  - option "01"
  - option "02"
  - option "03"
  - option "04"
  - option "05"
  - option "06"
  - option "07"
  - option "08"
  - option "09"
  - option "10"
  - option "11"
  - option "12"
  - option "13"
  - option "14"
  - option "15"
  - option "16"
  - option "17"
  - option "18"
  - option "19"
  - option "20"
  - option "21"
  - option "22" [selected]
  - option "23"
  - option "24"
  - option "25"
  - option "26"
  - option "27"
  - option "28"
  - option "29"
  - option "30"
  - option "31"
- text: CVV Code ?
- textbox: "123"
- text: Name on Card
- textbox: Raphael Doe
- text: Apply Coupon
- textbox: rahulshettyacademy
- paragraph: "* Coupon Applied"
- button "Apply Coupon"
- text: Shipping Information damasceno999@gmail.com
- textbox: damasceno999@gmail.com
- textbox "Select Country"
- text: Place Order
```

# Test source

```ts
   1 | import {test, expect,Locator,Page} from '@playwright/test';
   2 | export class PaymentPage
   3 | {
   4 |    page : Page;
   5 |    cvvInput: Locator;
   6 |    nameOnCardInput: Locator;
   7 |    couponInput: Locator;
   8 |    applyCoupon: Locator;
   9 |    orderBttn: Locator;
  10 |    country: Locator;
  11 |    dropdown: Locator;
  12 |    submit: Locator;
  13 |    orderConfirmationText: Locator;
  14 |    orderId: Locator;
  15 |    month_dropdown: Locator;
  16 |    year_dropdown: Locator;
  17 |    
  18 | constructor(page:Page)
  19 | {
  20 |     this.page = page
  21 |     this.cvvInput = page.locator('div.field:has-text("CVV Code") input.input.txt')
  22 |     this.nameOnCardInput = page.locator('div.field:has-text("Name on Card") input.txt');
  23 |     this.couponInput = page.locator("[name='coupon']");
  24 |     this.applyCoupon = page.locator('button.btn.btn-primary:has-text("Apply Coupon")')
  25 |     this.orderBttn = page.locator('text=Place Order')
  26 |     this.country = page.locator("[placeholder*='Country']");
  27 |     this.dropdown = page.locator(".ta-results");
  28 |     this.submit =  page.locator(".action__submit");
  29 |     this.orderConfirmationText = page.locator(".hero-primary");
  30 |     this.orderId = page.locator(".em-spacer-1 .ng-star-inserted");
  31 |  }
  32 |
  33 |
  34 |  async fillPaymentData(month:string,year:string,csv:string,name:string, couponValue:string){
  35 |     this.month_dropdown = await this.page.locator('div.field:has-text("Expiry Date") select.input.ddl').first();
  36 |     this.year_dropdown = await this.page.locator('div.field:has-text("Expiry Date") select.input.ddl').last();
  37 |     await this.month_dropdown.selectOption({ label: month });
  38 |     await this.year_dropdown.selectOption({ label: year });
  39 |     await this.cvvInput.fill(csv); 
  40 |     await this.nameOnCardInput.fill(name);
  41 |     await this.couponInput.fill(couponValue)
  42 |     await this.applyCoupon.click();
  43 |  }
  44 |
  45 |
  46 |
  47 |  async validateShippingInformation(username:string)
  48 |
  49 |  {
  50 |     await expect(this.page.locator('label', { hasText: username })).toBeVisible();
  51 |  }
  52 |
  53 |
  54 |     
  55 | async SearchCountryAndSelect(countryName: string) {
  56 |   const subsCountryString = countryName.substring(0, 3);
  57 |   await this.country.pressSequentially(subsCountryString, { delay: 300 });
  58 |
> 59 |   await this.dropdown.waitFor();
     |                       ^ TimeoutError: locator.waitFor: Timeout 30000ms exceeded.
  60 |   const optionsCount = await this.dropdown.locator("button").count();
  61 |
  62 |   for (let i = 0; i < optionsCount; ++i) {
  63 |     const textContent = await this.dropdown.locator("button").nth(i).textContent();
  64 |     const text = textContent?.trim() ?? "";
  65 |
  66 |     if (text === countryName) {
  67 |       await this.dropdown.locator("button").nth(i).click();
  68 |       break;
  69 |     }
  70 |   }
  71 | }
  72 |
  73 |   
  74 |
  75 | async SubmitAndGetOrderId() {
  76 |     await this.submit.click();
  77 |     await expect(this.orderConfirmationText).toHaveText(" Thankyou for the order. ");
  78 |     let rawOrderId:any;    
  79 |     rawOrderId= await this.orderId.textContent();
  80 |     const orderId = rawOrderId.replace(/\|/g, '').trim();
  81 |       
  82 |     return orderId;
  83 |     }
  84 |
  85 | }
  86 |
  87 | module.exports = {PaymentPage};
```